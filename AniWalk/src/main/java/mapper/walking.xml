<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.pandorabox.aniwalk.walking">
	<select id="recruitDog" parameterType="String" resultType="walking">
		select * from ani_dog d left outer join ani_member m
		on m.mem_id=d.mem_id
		left outer join ani_dog_img i
		on d.dog_id=i.dog_id
		where m.mem_nickname = #{mem_nickname}
	</select>
	<insert id="recruitInsert" parameterType="walking">
		insert into ani_walking(walking_id, recruit_mem_id, dog_id, walk_date, walk_start_time,
		walk_end_time, recruit_notices, recruit_location)
		values('walking'||lpad(seq_walking.nextval,5,0),#{recruit_mem_id},#{dog_id},to_date(#{walk_date},'YYYY-MM-DD'),
		#{walk_start_time},#{walk_end_time},#{recruit_notices},#{recruit_location})	
	</insert>
	<!-- 모집글 리스트 -->
   <select id="getRecruitList" resultType="walking">
      select * from ani_walking w left outer join ani_dog d
      on d.dog_id = w.dog_id
      left outer join ani_dog_img i
      on d.dog_id = i.dog_id
   </select>
   <!-- 자신이 올린 모집글 리스트-->
	<select id="recruitlist" parameterType="String" resultType="walking">
		select to_char(w.recruit_date,'YYYY-MM-DD') as recruit_date,d.dog_type,w.recruit_location,
        w.walk_start_time, w.walk_end_time, i.dog_image
        from ani_walking w left outer join ani_dog d
		on w.dog_id=d.dog_id
		left outer join ani_dog_img i
		on i.dog_id=d.dog_id
        left outer join ani_member m
        on m.mem_id=w.recruit_mem_id
        where m.mem_nickname=#{mem_nickname} 
        order by recruit_date desc 
		
	</select>
	

</mapper>